<mat-sidenav-container class="app-container" [hasBackdrop]="false">

    <!-- Sidebar -->
    <mat-sidenav #sidenav mode="side" opened [fixedInViewport]="true" [style.width.px]="isCollapsed ? 70 : 250"
        class="sidebar">
        <!-- Logo và tên -->
        <div class="sidebar-header" [ngClass]="{ collapsed: isCollapsed }">
            <mat-icon>admin_panel_settings</mat-icon>
            <span *ngIf="!isCollapsed" class="logo-text">Admin Panel</span>
            <button mat-icon-button (click)="toggleSidebar()" class="collapse-btn" matTooltip="Toggle Sidebar">
                <mat-icon>{{ isCollapsed ? 'chevron_right' : 'chevron_left' }}</mat-icon>
            </button>
        </div>

        <!-- Thanh tìm kiếm -->
        <mat-form-field appearance="outline" class="search-field" *ngIf="!isCollapsed">
            <mat-label>Search</mat-label>
            <input matInput [(ngModel)]="searchText" placeholder="Search menu" />
            <button mat-button *ngIf="searchText" matSuffix mat-icon-button aria-label="Clear" (click)="searchText=''">
                <mat-icon>close</mat-icon>
            </button>
        </mat-form-field>

        <!-- Menu chính -->
        <mat-nav-list>
            <mat-list-item *ngFor="let item of filteredMenu()" [routerLink]="item.route" routerLinkActive="active-link"
                [matTooltip]="isCollapsed ? item.label : ''" matTooltipPosition="right" class="custom-list-item">
                <mat-icon matListIcon>{{ item.icon }}</mat-icon>
                <span *ngIf="!isCollapsed">{{ item.label }}</span>
            </mat-list-item>

            <!-- Ví dụ submenu với expansion panel -->
            <mat-expansion-panel *ngIf="!isCollapsed" class="submenu-panel">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <mat-icon>settings</mat-icon> Settings
                    </mat-panel-title>
                </mat-expansion-panel-header>

                <mat-nav-list>
                    <mat-list-item routerLink="/profile" routerLinkActive="active-link">Profile</mat-list-item>
                    <mat-list-item routerLink="/permissions" routerLinkActive="active-link">Permissions</mat-list-item>
                </mat-nav-list>
            </mat-expansion-panel>
        </mat-nav-list>

        <!-- User info -->
        <div class="user-info" *ngIf="!isCollapsed" [matMenuTriggerFor]="userMenu">
            <mat-icon>account_circle</mat-icon>
            <span>{{ userName }}</span>
            <mat-icon>arrow_drop_down</mat-icon>
        </div>

        <mat-menu #userMenu="matMenu">
            <button mat-menu-item>
                <mat-icon>person</mat-icon>
                <span>Profile</span>
            </button>
            <button mat-menu-item (click)="logout()">
                <mat-icon>logout</mat-icon>
                <span>Logout</span>
            </button>
        </mat-menu>
    </mat-sidenav>

    <!-- Nội dung chính -->
    <mat-sidenav-content>
        <mat-toolbar color="primary">
            <button mat-icon-button (click)="toggleSidebar()" class="mobile-toggle-btn" *ngIf="isMobile">
                <mat-icon>menu</mat-icon>
            </button>
            <span>Dashboard Header</span>
        </mat-toolbar>

        <div class="main-content">
            <!-- Nội dung bạn muốn hiển thị -->
            <router-outlet></router-outlet>
        </div>
    </mat-sidenav-content>
</mat-sidenav-container>